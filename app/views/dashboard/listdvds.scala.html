@(dvdPage: DvdPage)(dvdListForm: Form[forms.DvdListFrom])(username: String)

@scripts = {
   <script src="@routes.Assets.at("javascripts/dvdList.js")" type="text/javascript"></script>
}

@mainmenu("Dvd Database - DVDs",scripts) {

  @if(flash.contains("success")) {
    <div class="alert alert-success">
      @flash.get("success")
    </div>
  }
  
  @searchform(dvdListForm)

  @if(dvdPage.page.getTotalRowCount == 0) {
    <h4>No Dvds found !</h4>
  } else {
  <div class="row">
    <h4>Displaying @dvdPage.page.getDisplayXtoYofZ(" to "," of ") DVD's</h4>
    
    
    @if(dvdPage.page.getTotalPageCount > 1) {
    <div class="row">
      <div class="pagination pagination-small pull-right">
        <ul>

          <li  @if(dvdPage.page.hasPrev == false) { class="disabled" }><a @if(dvdPage.page.hasPrev == true) { href="@routes.ListDvds.listdvds(dvdPage.page.getPageIndex-1)" }>Prev</a></li>

          @for(nav <- dvdPage.nav) {
            <li @if((nav.idx) == dvdPage.page.getPageIndex){class="active"} @if(nav.idx == null) {class="disabled"}>
            @if(nav.idx == null) {
              <a href="#">@nav.displayVal</a>
            } else {
              <a  href="@routes.ListDvds.listdvds(nav.idx)">@nav.displayVal</a>
            }
            </li>
          }
          
          <li @if(dvdPage.page.hasNext == false) { class="disabled" }><a @if(dvdPage.page.hasNext == true) { href="@routes.ListDvds.listdvds(dvdPage.page.getPageIndex+1)"}>Next</a></li>
        </ul>
      </div>
      </div>
    }
    
    <ul class="coverlist">
      @for(dvd <- dvdPage.list) {
        <li class="span3">
          <div class="coverwrapper">
            <em data-dvd-id="@dvd.id" class="@DvdAttribute.getCopyTypeAttribute(dvd)">
            
              @if(dvd.borrower != null || dvd.borrowerName != null){
                 <div class="coverborrowed"></div>
              }
            
              <div class="well well-small dvdInfo">
                <p> @dvd.movie.title  @if(dvd.hullNr != null) { (@dvd.hullNr) }</p>
                <span>
                   @dvd.owner.userName 
                   @if(dvd.borrower != null || dvd.borrowerName != null){
                     -> @if(dvd.borrower != null){ @dvd.borrower.userName } else { @dvd.borrowerName }
                   }
                 </span>
              </div>  
              <div class="rateWrapper"><img  src="@routes.Assets.at("images/agerating/"+DvdAttribute.getAgeRatingAttribute(dvd)+".gif")" /></div>
            </em>	
            <div class="btn-group dvdBtnGrp">
              @if(dvd.owner.userName == username) {
                @if(dvd.borrower == null && dvd.borrowerName == null) {
                  <a class="btn btn-inverse lendDvdBtn btn-mini" href="#" data-dvd-id="@dvd.id"><i class="icon-share"></i></a>
                } else {
                  <a class="btn btn-inverse unlendDvdBtn btn-mini" href="#" data-dvd-id="@dvd.id"><i class="icon-download"></i></a>
                }
                <a class="btn btn-inverse btn-mini" href="@routes.DvdController.showEditDvd(dvd.id)"><i class="icon-edit"></i></a>
                <a class="btn btn-inverse deleteDvdBtn btn-mini" href="#" data-dvd-id="@dvd.id"><i class="icon-trash"></i></a>
              } else {
                @if(dvd.borrower == null && dvd.borrowerName == null) {
                  <a class="btn btn-inverse btn-mini" href=""><i class="icon-shopping-cart"></i></a>
                }
              }
            </div>
            <a class="displayInfoButton" href="#" data-dvd-id="@dvd.id">
              @if(dvd.movie.hasPoster != null && dvd.movie.hasPoster == true) {
                <img src="@routes.Dashboard.streamImage(dvd.movie.id,"POSTER","SMALL")"/>
              } else {
                <img src="@routes.Assets.at("images/NoPoster.png")"/>
              }
             </a>
          </div>
        </li>
        }
    </ul>
    
  </div>
  
  <!-- DIALOG FOR DISPLAYING MOVIE -->
  <div id="dvdInfoDialog" title="Movie Infos">
    <div class="dialogContent">
      
    </div>
  </div>
  
  <!-- DIALOG FOR SHARING MOVIE -->
  <div id="dvdLendDialog" title="Lend Dvd">
    <div class="dialogContent">
      
    </div>
  </div>
  
  <!-- DIALOG FOR UNLENDING MOVIE -->
  <div id="dvdUnLendDialog" title="Unlend Dvd">
    <div class="dialogContent">
      
    </div>
  </div>
  
  <!-- DIALOg FOR DELETING A DVD -->
  <div id="deleteDvdDialog" title="Delete Dvd">
    <div class="dialogContent"></div>
  </div>
  }
  

}