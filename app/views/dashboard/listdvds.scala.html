@(dvdPage: DvdPage)(dvdListForm: Form[forms.dvd.DvdSearchFrom])(username: String)(shoppingCart: objects.shoppingcart.CacheShoppingCart)

@scripts = {
   <script src="@routes.Assets.at("javascripts/dvdList.js")" type="text/javascript"></script>
}

@mainmenu("Dvd Database - DVDs",scripts) {


  @if(flash.contains("success")) {
    <div class="alert alert-success">
      @flash.get("success")
    </div>
  }
  
  @searchform(dvdListForm)

  @if(dvdPage.page.getTotalRowCount == 0) {
    <h4>No Dvds found !</h4>
  } else {
  <div class="row">
    <h4>Displaying @dvdPage.page.getDisplayXtoYofZ(" to "," of ") DVD's</h4>

    @dvdlistnav(dvdPage)
 
    <ul class="coverlist">
      @for(dvd <- dvdPage.list) {
        <li class="span3">
          <div class="coverwrapper">
            <em data-dvd-id="@dvd.id" class="@DvdAttribute.getCopyTypeAttribute(dvd)">
            
              @if(dvd.borrower != null || dvd.borrowerName != null){
                 <div class="coverborrowed  @if(dvd.borrower != null  && dvd.borrower.userName == username) {selfBorrowed}"></div>
              }
            
              <div class="well well-small dvdInfo @if(dvd.borrower != null || dvd.borrowerName != null){borrowed} @if(dvd.borrower != null  && dvd.borrower.userName == username) {selfBorrowed}">
                <p> @dvd.movie.title  @if(dvd.hullNr != null) { (@dvd.hullNr) }</p>
                <span>
                   @dvd.owner.userName 
                   @if(dvd.borrower != null || dvd.borrowerName != null){
                     -> @if(dvd.borrower != null){ @dvd.borrower.userName } else { @dvd.borrowerName }
                   }
                 </span>
              </div>
              <div class="rateWrapper"><img  class="img-rounded" src="@routes.Assets.at("images/agerating/"+DvdAttribute.getAgeRatingAttribute(dvd)+".gif")" /></div>
            </em>	
            <div class="btn-group dvdBtnGrp">
              @if(dvd.owner.userName == username) {
                @if(dvd.borrower == null && dvd.borrowerName == null) {
                  <a class="btn btn-inverse lendDvdBtn btn-mini" href="#" data-dvd-id="@dvd.id"><i class="icon-share"></i></a>
                } else {
                  <a class="btn btn-inverse unlendDvdBtn btn-mini" href="#" data-dvd-id="@dvd.id"><i class="icon-download"></i></a>
                }
                <a class="btn btn-inverse btn-mini" href="@routes.DvdController.showEditDvd(dvd.id)"><i class="icon-edit"></i></a>
                <a class="btn btn-inverse deleteDvdBtn btn-mini" href="#" data-dvd-id="@dvd.id"><i class="icon-trash"></i></a>
              } else {
                  <a @if(shoppingCart.isInShoppingCart(dvd.id) == true) {style="display: none;"} class="btn btn-inverse btn-mini addToCartBtn" href="#" data-dvd-id="@dvd.id" ><i class="icon-shopping-cart"> <i class="icon-plus-sign"></i></i></a>
                  <a @if(shoppingCart.isInShoppingCart(dvd.id) == false) {style="display: none;"} class="btn btn-mini btn-danger remFromCartBtn" href="#" data-dvd-id="@dvd.id" ><i class="icon-shopping-cart"></i> <i class="icon-remove-sign"></i></a>
              }
            </div>
            <a>
              @if(dvd.movie.hasPoster != null && dvd.movie.hasPoster == true) {
                <img src="@routes.Dashboard.streamImage(dvd.movie.id,"POSTER","SMALL")"/>
              } else {
                <img src="@routes.Assets.at("images/NoPoster.png")"/>
              }
             </a>
          </div>
        </li>
        }
    </ul>

    @dvdlistnav(dvdPage)
    
  </div>
  
  }
  

}