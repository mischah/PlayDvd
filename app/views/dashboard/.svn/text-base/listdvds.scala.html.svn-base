@(dvdPage: DvdPage)(username: String)

@scripts = {
   <script src="@routes.Assets.at("javascripts/dvdList.js")" type="text/javascript"></script>
}

@mainmenu("Dvd Database - DVDs",scripts) {

  @if(flash.contains("success")) {
    <div class="alert alert-success">
      @flash.get("success")
    </div>
  }

  @if(dvdPage.page.getTotalRowCount == 0) {
    <h1>No Dvds found !</h1>
  } else {
  <div class="row">
    <h1>Displaying @dvdPage.page.getDisplayXtoYofZ(" to "," of ") DVD's</h1>
    
    @if(dvdPage.page.getTotalPageCount > 1) {
    <div class="row">
      <div class="pagination pull-right">
        <ul>
          @if(dvdPage.page.hasPrev) {
            <li><a href="@routes.ListDvds.listdvds(dvdPage.page.getPageIndex-1)">Prev</a></li>
          }
          @for(idx <- 1 to dvdPage.page.getTotalPageCount) {
            <li @if((idx-1) == dvdPage.page.getPageIndex){class="active"}>
              <a href="@routes.ListDvds.listdvds(idx-1)">@idx</a>
            </li>
          }
          
          @if(dvdPage.page.hasNext) {
            <li><a href="@routes.ListDvds.listdvds(dvdPage.page.getPageIndex+1)">Next</a></li>
          }
        </ul>
      </div>
      </div>
    }
    
    <ul class="thumbnails">
    @for(dvd <- dvdPage.list) {
      <li class="span3 dvdListHeight">
        <div class="thumbnail dvdDisplayContainer dvdListHeight well">
          @if(dvd.hasPoster != null && dvd.hasPoster == true) {
            <img src="@routes.Dashboard.streamImage(dvd.id,"POSTER","SMALL")"/>
          } else {
            <img src="http://placehold.it/92x138/4D99E0/ffffff.png&text=No%20Poster"/>
          }
        
          <div class="caption">  
          <h5  >@dvd.title (@dvd.owner.userName)</h5>
          
          <div class="btn-group">
            <a class="btn displayInfoButton" href="#" data-dvd-id="@dvd.id"><i class="icon-info-sign"></i></a>
            @if(dvd.owner.userName == username) {
              <a class="btn" href="@routes.Dashboard.showEditDvd(dvd.id)"><i class="icon-edit"></i></a>
              <a class="btn" href=""><i class="icon-trash"></i></a>
            } else {
              <a class="btn" href=""><i class="icon-shopping-cart"></i></a>
            }
          </div>
        </div>
          
        </div>
      </li>
    }
    </ul>
    
  </div>
  
  <div id="dvdInfoDialog" title="Movie Infos">
    <div class="dialogContent">
      
    </div>
  </div>
  }
  

}