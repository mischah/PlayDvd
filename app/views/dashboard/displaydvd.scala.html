@(dvd: forms.InfoDvd)(username: String) 

@subDvdDisplay(subDvds : List[forms.CollectionDvd], dvd:forms.InfoDvd, title: String, subTitle: String, username:String) = {
  @if(subDvds != null && subDvds.size() > 0) {
    <fieldset class="well">
      <h3>Dvds in the @title <i>@subTitle:</i></h3>
      
       <div class="row-fluid">
        <ul class="coverlist">
         @for(subDvd <- subDvds) {
           <li class="span3 listNoMargin">             
            <div class="coverwrapper">
              <em data-dvd-id="@subDvd.id" class="@subDvd.copyTypeAttribute">

                   @if(subDvd.borrowerName != null){
                     <div class="coverborrowed  @if(subDvd.borrowerName == username) {selfBorrowed}"></div>
                   }

                   <div class="well well-small dvdInfo @if(subDvd.borrowerName != null ){borrowed @if(subDvd.borrowerName == username) {selfBorrowed}}">
                     <p> @subDvd.title @if(subDvd.hullNr != null) { (@subDvd.hullNr) }</p>
                     <span> 
                       @if(subDvd.borrowerName != null){
                         @subDvd.borrowerName
                     }
                   </span>
                 </div>  
                 <div class="rateWrapper"><img  src="@routes.Assets.at("images/agerating/"+subDvd.ageRating+".gif")" /></div>
               </em>
               <a>
                   @if(subDvd.hasPoster != null && subDvd.hasPoster == true) {
                     <img src="@routes.Dashboard.streamImage(subDvd.movieId,"POSTER","SMALL")"/>
                   } else {
                    <img src="@routes.Assets.at("images/NoPoster.png")"/>
                   } 
                 </a>
             </div>
           </li>
         }
       </ul>       
       </div>      
    </fieldset>
  }
}

<div class="row-fluid">
<div class="span12">

  <fieldset class="well">
    <h2>Plot:</h2>
    <p>@dvd.movieForm.plot</span>
  </fieldset>
  
  <fieldset class="well">
    
    <h2>Info:</h2>
    
    <div class="row-fluid">
      <div class="span4">
    
    <div class="row-fluid">
      <label class="span4">Owner:</label>
      <span>
        <a href="@routes.ListDvds.listByUser(dvd.dvdForm.ownerName,0)">
          <img src="@routes.Dashboard.gravatar(50,dvd.dvdForm.ownerName)" />
          @dvd.dvdForm.ownerName
        </a>
      </span>
    </div>
    
    @if(dvd.borrowedBy != null) {
      <div class="row-fluid">
        <label class="span4">Borrowed by:</label>
        <span>
          <img src="@routes.Dashboard.gravatar(50,dvd.borrowedBy)" />
          @dvd.borrowedBy 
          (@dvd.borrowedOn)
        </span>
      </div>
    }
    
    <div class="row-fluid">
      <label class="span4">Movie Series:</label>
      <span>@dvd.movieForm.series</span>
    </div>
    
    @if(dvd.dvdForm.copyType != null) {
      <div class="row-fluid">
        <label class="span4">Type:</label>
        <span><img alt="@dvd.dvdForm.copyType" src="@routes.Assets.at("images/copy_type/"+dvd.dvdForm.copyType+".png")" /> @dvd.dvdForm.copyType</span>
      </div>
    }
    
    @if(dvd.dvdForm.ageRating != null) {
      <div class="row-fluid">
        <label class="span4">Age Rating:</label>
        <span><img alt="@dvd.dvdForm.ageRating" src="@routes.Assets.at("images/agerating/"+dvd.dvdForm.ageRating+".gif")" /> @dvd.dvdForm.ageRating</span>
      </div>
    }
    
    @if(dvd.dvdForm.hullNr != null) {
      <div class="row-fluid">
        <label class="span4">Hull Nr.:</label>
        <span>      
          <a href="@routes.ListDvds.searchDvd?searchFor=@models.Dvd.HULL_NR_SEARCH @dvd.dvdForm.hullNr">@dvd.dvdForm.hullNr</a>
        </span>
      </div>
    }
    
    <div class="row-fluid">
      <label class="span4">Runtime:</label>
      <span>@dvd.movieForm.runtime</span>
    </div>  
    
    <div class="row-fluid">
      <label class="span4">Year:</label>
      <span>@dvd.movieForm.year</span>
    </div>
    
    <div class="row-fluid">
      <label class="span4">Director:</label>
      <span><a href="@routes.ListDvds.listByDirector(dvd.movieForm.director)">@dvd.movieForm.director</a></span>
    </div>
    
    </div>
    <div class="span4">
    
    <div class="span12">
      <dl>
        <dt>Genres:</dt>
        @for(genre <- dvd.movieForm.genres) {
          <dd><a href="@routes.ListDvds.listByGenre(genre,0)">@genre</a></dd>
        }
      </dl>
    </div>
    </div>
    <div class="span4">
    
    <div class="span12">
      <dt>Actors:</dt>
      <dl>
        @for(actor <- dvd.movieForm.actors) {
          <dd><a href="@routes.ListDvds.listByActor(actor)">@actor<a></a></dd>
        }
      </dl>
    </div>
    </a>
    
  </div>  
    
  </fieldset>
  
  @if(dvd.movieForm.trailerUrl != null && dvd.movieForm.trailerUrl != "") {
   <fieldset class="well">
     <h2>Trailer:</h2>
     
     <iframe width="560" height="315"  src="http://www.youtube.com/embed/@dvd.movieForm.trailerUrl" frameborder="0" allowfullscreen></iframe>
     
   </fieldset>
   }
    
  
  @subDvdDisplay(dvd.boxDvds, dvd, "box",dvd.dvdForm.box,username)
    
  @subDvdDisplay(dvd.collectionDvds, dvd, "collection",dvd.dvdForm.collection,username)
  
  @subDvdDisplay(dvd.seriesDvd, dvd, "movie series "+dvd.movieForm.series,dvd.dvdForm.collection,username)

</div>
</div>

<script type="text/javascript">
$(function() {
  $('#modalLabel').html("@dvd.movieForm.title");
  @if(dvd.movieForm.hasBackdrop != null && dvd.movieForm.hasBackdrop == true) {
    $('#modal.dvdInfoModal .modal-body').css('background-image',"url('@routes.Dashboard.streamImage(dvd.movieForm.movieId,"BACKDROP","ORIGINAL")')");
  } else {
    $('#modal.dvdInfoModal .modal-body').css('background-image','none');
  }
});
</script>


