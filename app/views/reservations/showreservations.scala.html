@(reservations: Map[User,List[CopyReservation]], ownReservations: List[CopyReservation], lentCopies: Map[String,List[Dvd]])

@import helper._
@import helper.twitterBootstrap._

@scripts = {
  <script src="@routes.Assets.at("javascripts/reservations.js")" type="text/javascript"></script>
}

@mainmenu("Dvd Database - Reservations",scripts) {


  <div class="row well">

    <fieldset>
      <legend><i class="icon-list"></i> Reservations</legend>

      <ul id="resTab" class="nav nav-tabs">
        <li class="active"><a href="#reserved" data-toggle="tab">Reserved copies by other users</a></li>
        <li><a href="#own" data-toggle="tab">Reserved by user</a></li>
        <li><a href="#lent" data-toggle="tab">Lent copies</a></li>
      </ul>
      <div id="resTabContent" class="tab-content">
        <div class="tab-pane fade in active" id="reserved">

          <div id="reservationsTab" class="tabbable tabs-left">
            <ul class="nav nav-tabs">
              @for((borrower,reservations) <- reservations) {
                <li>
                  <a href="#resTab@borrower.id" data-toggle="tab"><img src="@routes.Dashboard.gravatar(16,borrower.userName)" width="16" height="16" /> @borrower.userName (@reservations.size)</a>
                </li>
              }
            </ul>
            <div class="tab-content">
              @for((borrower,reservations) <- reservations) {
                <div class="tab-pane" id="resTab@borrower.id">

                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th><input type="checkbox" class="reservationsCheckAll" data-borrower="@borrower.id"/></th>
                        <th>Item</th>
                        <th>Reserved @@</th>
                      </tr>
                    </thead>
                    <tbody>
                      @for(reservation <- reservations) {
                        <tr>
                          <td>
                            @if(reservation.copy.borrowDate == null) {
                              <input type="checkbox" class="reservationsCopyCheckBox" data-borrower="@borrower.id" data-copyid="@reservation.copy.id" />
                            }
                          </td>
                          <td>@general.displayitem(reservation.copy,true)</td>
                          <td>@{new Date(reservation.date)}</td>
                        </tr>
                      }
                    </tbody>
                    <tfoot>
                      <tr>
                        <th colspan="3">
                          <div  class="pull-right">
                          <button type="button" class="btn btn-warning disabled reservationsBorrowBtn" data-borrower="@borrower.id"><i class="icon-share"></i> Borrow</button>
                          <button type="button" class="btn btn-danger disabled reservationsDeleteBtn" data-borrower="@borrower.id"><i class="icon-trash"></i> Delete</button>
                            </div>
                        </th>
                      </tr>
                    </tfoot>
                  </table>
                </div>
              }
            </div>
          </div>
        </div>

        <div class="tab-pane fade" id="own">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Copy</th>
                <th>Reserved @@</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              @for(reservation <- ownReservations) {
                <tr id="ownReservation@reservation.id">
                  <td>@general.displayitem(reservation.copy,true)</td>
                  <td>@{new Date(reservation.date)}</td>
                  <td><button type="button" class="btn btn-danger" onclick="removeOwnReservation(@reservation.id);"><i class="icon-trash"></i></button></td>
                </tr>
              }
            </tbody>
          </table>
        </div>

        <div class="tab-pane fade" id="lent">

        </div>
      </div>


    </fieldset>

  </div>
}

