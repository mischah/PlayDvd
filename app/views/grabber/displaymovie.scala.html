@(displayMovie : grabbers.GrabberDisplayMovie,grabberType: String,movieToEditId: Long,mode: String)
@import org.apache.commons.lang.StringUtils

@import helper._

<div class="col_12">
  <h1>@displayMovie.movieTitle</h1>



  @form(routes.MovieController.addMovieByGrabberId(mode,grabberType),'class -> "vertical",'id -> "grabberMovieForm", 'mode -> mode, 'grabberType -> grabberType) {


    <input type="hidden" name="grabberMovieId" id="grabberMovieId"  value="@displayMovie.systemId"/>
    <input type="hidden" name="movieToEditId" id="movieToEditId" value="@movieToEditId" />
    <input type="hidden" name="grabberType" id="grabberType" value="@grabberType" />


    <ul id="myTab" class="nav nav-tabs">
      <li class="active"><a href="#grabberDataOverview" data-toggle="tab">Overview</a></li>

      @if(displayMovie.posterUrls != null && displayMovie.posterUrls.size() > 0) {
        <li><a href="#grabberDataPosters" data-toggle="tab">Poster</a></li>
      }

      @if(displayMovie.backDropUrls != null && displayMovie.backDropUrls.size() > 0) {
        <li><a href="#grabberDataBackdrops" data-toggle="tab">Backdrops</a></li>
      }

      @if(displayMovie.trailerUrls != null && displayMovie.trailerUrls.size() > 0) {
        <li><a href="#grabberDataTrailers" data-toggle="tab">Trailers</a></li>
      }
    </ul>


    <div id="myTabContent" class="tab-content">

    <div class="tab-pane fade in active" id="grabberDataOverview">
      <h3>Description</h3>
      <p>
        @displayMovie.plot
      </p>
      @if(StringUtils.isEmpty(displayMovie.imdbId) == false) {
        <p>
          IMDBID: <a href="http://www.imdb.com/title/@displayMovie.imdbId" target="_blank">@displayMovie.imdbId</a>
        </p>
      }
    </div>

    @if(displayMovie.posterUrls != null || displayMovie.posterUrls.size() > 0) {
      <div class="tab-pane fade in" id="grabberDataPosters">
      <h3>Posters</h3>

       <ul class="thumbnails">
        @for((poster,index) <- displayMovie.posterUrls.zipWithIndex) {
          <li class="span3" style="height: 160px;">
            <div class="thumbnail" style="height: 160px;">
              <img src="@routes.Dashboard.streamExternalImage()?url=@poster.url&imgSize=GRABBER_POSTER_SMALL"/>
              <div class="caption">
                <input @if(index == 0){checked="checked"} type="radio" name="grabberPosterId" value="@poster.id"/>
              </div>
            </div>
          </li>
        }
      </ul>

    </div>
  }

  @if(displayMovie.backDropUrls != null || displayMovie.backDropUrls.size() > 0) {
    <div class="tab-pane fade in" id="grabberDataBackdrops">
      <h3>Backdrops</h3>
      <ul class="thumbnails">
        @for((backdrop,index) <- displayMovie.backDropUrls.zipWithIndex) {
          <li class="span4" style="height: 190px;">
            <div class="thumbnail" style="height: 190px;">
              <img src="@routes.Dashboard.streamExternalImage()?url=@backdrop.url&imgSize=GRABBER_BACKDROP_SMALL" />
              <div class="caption">
                <input @if(index == 0){checked="checked"} type="radio" name="grabberBackDropId" value="@backdrop.id"/>
              </div>
            </div>
          </li>
        }
      </ul>


    </div>
  }

    @if(displayMovie.trailerUrls != null || displayMovie.trailerUrls.size() > 0) {
      <div class="tab-pane fade in" id="grabberDataTrailers">
      <h3>Trailers</h3>
      <ul class="thumbnails">
        @for((trailerUrl,index) <- displayMovie.trailerUrls.zipWithIndex) {
          <li class="span4" style="height: 190px;">
            <div class="thumbnail" style="height: 190px;">

            <iframe width="289" height="163"  src="http://www.youtube.com/embed/@trailerUrl" frameborder="0" allowfullscreen></iframe>
              <div class="caption">
                <input @if(index == 0){checked="checked"} type="radio" name="grabberTrailerUrl" value="@trailerUrl"/>
              </div>
            </div>
          </li>
        }
      </ul>


    </div>
  }




    </div>


  }
</div>

<script>
  /**
  * If the popup is opened by edit mode we want to keep the dvdId
  */
  $(function() {
	var dvdToEdit = $('#dvdId').val();
	if(isNaN(dvdToEdit) == false) {
		$('#dvdEditId').val(dvdToEdit);
	}

  });
</script>

